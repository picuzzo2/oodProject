@model CSFinder.Models.CompanyAccount
@{
    ViewData["Title"] = "Home";
    Layout = "_CompanyLayout";
}

<!DOCTYPE html>
<html>
<head>
    <style>
        .card-img1 {
            border-radius: 50%;
            margin: 3px;
            margin-left: 10%;
            width: 50px;
            height: 50px;
            border: 1px solid #ddd;
        }

        img {
            margin: 20px;
            width: 500px;
        }

        .card-img {
            border-radius: 50%;
            margin: 20px;
            border: 1px solid #ddd;
            padding: 5px;
            width: 150px;
            height: 150px;
        }



        input {
            position: relative;
            width: 700px;
            height: 120px;
            background: #ced6e0;
            border: 3px solid #22a6b3;
            border-radius: 10px;
            margin-bottom: 3px;
            width: 100%;
            padding: 20px;
        }

        button {
            border: 3px solid #22a6b3;
            border-radius: 10px;
        }

        hr {
            margin: 0;
            margin-top: 0;
            margin-bottom: 3px;
            border: 0;
            border-top: 1px solid #9da7b1;
        }

        .box {
            width: 700px;
        }


        * {
            box-sizing: border-box;
        }

            *
            body {
                font-family: Arial;
                margin: 0;
            }
        /* Column container */
        .row {
            display: flex;
            flex-wrap: wrap;
        }

        /* Main column */
        .main {
            flex: 70%;
            background-color: white;
            padding: 20px;
        }

        .box {
            width: 620px;
            padding: 10px;
            border: 5px solid #CACFD2;
            margin: 0;
            border-radius: 10px;
            background-color: #D7DBDD;
        }
        p {
        margin: 0;
    }

    .column1 {
        float: left;
        width: 25%;
        padding-right: 10px;
        height: 50%;
        background-color: #f1f1f1;
        position: fixed;
        border-radius: 30px;

    }

    .column2 {
        float: left;
        width: 100%;
        padding-left: 35%;
        height: 100%;
    }

    </style>
</head>
<body>

    <!-- The flexible grid (content) -->
    <div class="row">
        <div class="column1" align='center'>
            <img class="card-img" src="@ViewBag.company.ImgProfile" border="0"  /><br />
            <p align='left' style="margin-left:40px;"><b>@ViewBag.company.Name</b></p>
            <p align='left' style="margin-left:40px;"><b>ที่อยู่ : </b>@ViewBag.company.Address</p>
            <p align='left' style="margin-left:40px;"><b>โทร : </b>@ViewBag.company.Phone</p>
            <p align='left' style="margin-left:40px;"><b>Email : </b>@ViewBag.userEmail</p><br/>
            <button >แก้ไขข้อมูล</button>
        </div>

        <div class="column2">
            <div class="main">

                <div class="form-group">
                    <div class="col-md-12">
                        <div class="box">
                            <div id="Post">
                                @Html.TextBoxFor(a => a.Detail, new { @class = "form-control", @placeholder = "Post something..." })
                            </div>
                            <a href="home" class="btn btn-primary" onclick="PostImgCompany()">Upload image</a><br />
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-md-12">
                        <a href="home" class="btn btn-primary" onclick="PostCompany()">Post</a>
                    </div>
                </div>

                @foreach (PostCompany p in ViewBag.postCompanyList)
                {
                    <div class="oneOfPost">
                        <img class="card-img1" src="@p.company.ImgProfile" border="0">
                        <b>@p.company.Name</b><br>
                        <p style="margin-left: 10%;">@p.post.Detail</p>
                        <img style="margin-left: 10%;" src="@p.post.ImgLink" border="0">
                    </div>
                }
            </div>
        </div>
    </div>

</body>
</html>
<script>
    var PostCompany = function () {
        debugger
        var data = $("#myForm").serialize();
        if (!$("#myForm").valid()) {

            return false;
        }

        $.ajax
        ({
            type: "Post",
            url: "/Company/Home",
            data: data,
            success: function (response) {

                if (response == "fail") {
                    window.location.href = "/Company/Home";
                }
                else if (response.success) {
                    alert(response.responseText);
                    window.location.href = "/Company/Home";
                }
                else if (!response.success) {
                    alert(response.responseText);
                    window.location.href = "/Company/Home"
                    debugger
                }
            }
        })
    }
</script>
